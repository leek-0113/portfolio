---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const base = import.meta.env.BASE_URL;
---

<BaseLayout title="ポートフォリオ">
  <section class='hero'>
    <div class='hero-image'>
      <img src={`${base}images/hero.png`} alt='Hero image' />
    </div>

    <div class='hero-text'>
      <h1>ねぎ's<br />ポートフォリオサイトへ<br />ようこそ!</h1>
      <p> Live2D / ゲーム / 表現技術</p>
    </div>
  </section>

  <section style="padding: 2rem;">
    <h2>作品一覧</h2>

    <ul>
      {posts.map((post) => {
        const slug = post.id.replace(/\.md$/, '');
        return (
          <li>
            <a href={`${base}posts/${slug}`}>{post.data.title}</a>
          </li>
        );
      })}
    </ul>
  </section>
</BaseLayout>

<style>
  .hero {
    display: flex;
    min-height: 100vh;
    padding: 4rem;
    box-sizing: border-box;
  }

  .hero-image,
  .hero-text {
    flex: 1;
  }

  .hero-image {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .hero-image img {
    max-width: 200%;
    max-height: 80vh;
    object-fit: contain;
  }

  .hero-text {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-left: 4rem;
  }

  .hero-text h1 {
    font-size: 4rem;
    line-height: 1.2;
    margin: 0 0 1rem;
  }

  .hero-text p {
    font-size: 1.25rem;
    opacity: 0.8;
  }
  /* === Mobile layout === */
  @media (max-width: 768px) {
    .hero {
      flex-direction: column;
      padding: 2rem;
    }

    .hero-image,
    .hero-text {
      flex: none;
      width: 100%;
    }

    .hero-image {
      margin-bottom: 2rem;
    }

    .hero-text {
      padding-left: 0;
      text-align: center;
    }

    .hero-text h1 {
      font-size: 2.5rem;
    }
  }
</style>

